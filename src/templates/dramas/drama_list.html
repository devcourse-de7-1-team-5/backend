{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ë“œë¼ë§ˆ íŠ¸ë Œë“œ</title>
    <link rel="stylesheet" href="{% static 'dramas/drama_dashboard.css' %}">
</head>
<body>

    <header>
        <h1>ğŸ“º ë“œë¼ë§ˆ íŠ¸ë Œë“œ í•œëˆˆì— ë³´ê¸°</h1>
        <div class="filters">
            <select id="yearSelect">
                <option value="all">ì „ì²´ ì—°ë„</option>
                {% for year in year_list %}
                    <option value="{{ year }}">{{ year }}ë…„</option>
                {% endfor %}
            </select>

            <select id="genreSelect">
                <option value="all">ì „ì²´ ì¥ë¥´</option>
                {% for genre in genre_list %}
                    <option value="{{ genre }}">{{ genre }}</option>
                {% endfor %}
            </select>
        </div>
    </header>

    <main>
        {% if dramas %}
        <section class="drama-grid">
            {% for drama in dramas %}
            <div class="drama-card" data-year="{{ drama.start_date.year }}" data-genre="{{ drama.genre }}">
                <div class="thumbnail">
                    {% if drama.img_url %}
                        <img src="{{ drama.img_url }}" alt="{{ drama.title }}">
                    {% else %}
                        <img src="{% static 'dramas/images/default_thumb.jpg' %}" alt="No Image">
                    {% endif %}
                </div>
                <div class="drama-info">
                    <h2 class="title">{{ drama.title }}</h2>
                    <p class="channel">{{ drama.channel }}</p>
                    <p class="period">{{ drama.start_date }} ~ {{ drama.end_date|default:"ë°©ì˜ ì¤‘" }}</p>
                    <p class="genre">
                        ì¥ë¥´:
                        {% if drama.genres.all %}
                            {% for g in drama.genres.all|slice:":3" %}
                                {{ g.name }}{% if not forloop.last %}, {% endif %}
                            {% endfor %}
                            {% if drama.genres.count > 3 %} ...{% endif %}
                        {% else %}
                            ì •ë³´ ì—†ìŒ
                        {% endif %}
                    </p>

                    <p class="desc">{{ drama.description|truncatechars:100|default:"ì¤„ê±°ë¦¬ ì •ë³´ ì—†ìŒ" }}</p>
                </div>

            </div>
            {% endfor %}
        </section>
        {% else %}
        <p class="empty">ë“±ë¡ëœ ë“œë¼ë§ˆê°€ ì—†ìŠµë‹ˆë‹¤.</p>
        {% endif %}
    </main>

</body>
</html>
